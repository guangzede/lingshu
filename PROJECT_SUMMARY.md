# 灵枢百宝箱 - 项目总结

## 项目概述

灵枢百宝箱是一个基于中国传统命理学说的综合系统，整合了五运六气、天干地支、八字排盘和股市预测功能。

## 技术架构

### 核心模块

1. **tiangan_dizhi.py** (天干地支)
   - 十天干、十二地支枚举
   - 六十甲子干支计算
   - 纳音五行推算
   - 五行阴阳属性

2. **wuyun_liuqi.py** (五运六气)
   - 五运分析（基于天干）
   - 六气分析（基于地支）
   - 年度运气特征
   - 健康倾向预测

3. **bazi.py** (八字排盘)
   - 四柱计算（年月日时）
   - 十神关系分析
   - 五行强弱统计
   - 地支藏干

4. **stock_prediction.py** (股市预测)
   - 五行行业映射
   - 市场趋势分析
   - 交易时机建议
   - 风险评估

### 工具脚本

- **examples.py**: 完整功能演示
- **predict_stock.py**: 股市预测CLI工具
- **test_all.py**: 综合测试套件

## 五行行业映射

| 五行 | 对应行业 |
|------|----------|
| 木 | 农业、林业、造纸、家具、纺织、中药 |
| 火 | 能源、电力、化工、军工、电子、传媒 |
| 土 | 房地产、建材、水泥、陶瓷、农产品、建筑 |
| 金 | 金融、银行、保险、证券、机械、金属 |
| 水 | 水务、航运、物流、水产、酒类、饮料 |

## 实现特性

### 1. 完整的天干地支系统
- 支持公历年份到干支的转换
- 六十甲子循环计算
- 纳音五行（30种）
- 五行属性和阴阳属性

### 2. 传统五运六气
- 根据天干推算五运
- 根据地支推算六气
- 年度运气分析
- 六气季节分布
- 健康养生建议

### 3. 精确八字排盘
- 四柱自动计算
- 月干起例（五虎遁）
- 时干起例（五鼠遁）
- 十神关系
- 五行统计

### 4. 创新股市预测
- 基于五行理论的板块分析
- 市场趋势判断
- 交易时机建议
- 风险等级评估
- 完整报告生成

## 测试覆盖

测试套件覆盖所有核心功能：
- ✅ 天干地支模块测试
- ✅ 五运六气模块测试
- ✅ 八字排盘模块测试
- ✅ 股市预测模块测试
- ✅ 集成测试

所有测试通过率：**100%** (5/5)

## 使用示例

### 基本用法

```python
from datetime import datetime
from lingshu import GanZhi, WuYunLiuQi, BaZi, StockPredictor

# 1. 查询年份干支
gz = GanZhi.from_year(2024)
print(f"2024年: {gz}")  # 甲辰

# 2. 分析五运六气
wylq = WuYunLiuQi(2024)
print(wylq)  # 2024年 甲辰 土运 太阳寒水

# 3. 排八字
bazi = BaZi(datetime(1990, 1, 1, 12, 0))
print(bazi)  # 庚午 戊寅 丙寅 甲午

# 4. 预测股市
predictor = StockPredictor(datetime.now())
print(predictor.generate_report())
```

### 命令行工具

```bash
# 运行完整示例
python examples.py

# 生成股市预测报告
python predict_stock.py 2024-01-15

# 运行测试
python test_all.py
```

## 技术特点

1. **纯Python实现**：无外部依赖
2. **类型提示**：完整的类型注解
3. **枚举类型**：使用Enum确保类型安全
4. **文档完整**：中英文双语注释
5. **易于扩展**：模块化设计

## 算法说明

### 纳音计算
使用中国剩余定理求解干支在六十甲子中的位置，然后根据纳音表查找对应的纳音五行。

### 日柱推算
基于2000年1月1日（戊午日）作为基准，通过计算天数差来推算任意日期的干支。

### 五行平衡
通过计算五行分布的方差来判断市场平衡状态：
- 方差 < 1.0: 平衡市场，震荡行情
- 最强五行 ≥ 4: 失衡市场，单边行情
- 其他: 正常市场，结构性行情

## 注意事项

1. **投资风险警示**：本系统基于传统命理学说，预测结果仅供参考，不构成投资建议
2. **算法简化**：八字计算采用简化算法，未考虑节气精确时刻
3. **文化背景**：建议了解中国传统文化背景后使用
4. **持续改进**：欢迎提供反馈和改进建议

## 未来计划

- [ ] 增加节气精确计算
- [ ] 支持大运、流年分析
- [ ] 添加更多技术指标
- [ ] 历史数据回测功能
- [ ] Web界面开发
- [ ] 移动应用支持

## 版权与许可

MIT License © 2024 guangzede

## 免责声明

本软件仅供学习和研究使用。投资有风险，入市需谨慎！
